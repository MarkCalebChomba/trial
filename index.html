<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Oda Pap</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <script src="../src/js/firebase.js" type="module"></script>
    <script src="script.js" type="module"></script>
  </head>

  <body>
    <header>
      <div class="top-bar">
        <div class="logo-container">
          <img src="images/logo.jpg" alt="Oda Pap Logo" class="logo" />
          <span class="logo-text">Oda Pap</span>
        </div>

        <div class="search-container">
          <form id="searchForm">
            <input type="text" id="searchInput" placeholder="Search..." />
            <button type="submit"><i class="fas fa-search"></i></button>
          </form>
          <div id="searchSuggestions" class="suggestions">
            <!-- Suggestions will be dynamically populated here -->
          </div>
        </div>

        <div class="top-icons">
          <div class="menu-icon" onclick="toggleMenu()">
            <i class="fas fa-bars"></i>
            <p>Menu</p>
          </div>
          <div class="dropdown-content" id="dropdown">
            <a href="student-centre.html" class="category">
              <i class="fas fa-graduation-cap"></i>
              <p>Student Centre</p>
            </a>
            <a href="electronics.html" class="category">
              <i class="fas fa-tv"></i>
              <p>Electronics</p>
            </a>
            <a href="kitchenware.html" class="category">
              <i class="fas fa-blender"></i>
              <p>Kitchenware</p>
            </a>
            <a href="furniture.html" class="category">
              <i class="fas fa-couch"></i>
              <p>Furniture</p>
            </a>
            <a href="fashion.html" class="category">
              <i class="fas fa-tshirt"></i>
              <p>Fashion</p>
            </a>
            <a href="beauty.html" class="category">
              <i class="fas fa-heart"></i>
              <p>Beauty</p>
            </a>
            <a href="rentals.html" class="category">
              <i class="fas fa-building"></i>
              <p>Rentals</p>
            </a>
            <a href="service-men.html" class="category">
              <i class="fas fa-tools"></i>
              <p>Service Men</p>
            </a>
            <a href="foodstuffs.html" class="category">
              <i class="fas fa-carrot"></i>
              <p>Foodstuffs</p>
            </a>
            <a href="phones.html" class="category">
              <i class="fas fa-mobile-alt"></i>
              <p>Phones</p>
            </a>
            <a href="accessories.html" class="category">
              <i class="fas fa-headphones"></i>
              <p>Accessories</p>
            </a>
            <a href="pharmaceutical.html" class="category">
              <i class="fas fa-pills"></i>
              <p>Pharmaceutical</p>
            </a>
            <a href="kids.html" class="category">
              <i class="fas fa-hat-wizard"></i>
              <p>kids</p>
            </a>
          </div>

          <script>
            function toggleMenu() {
              var dropdown = document.getElementById("dropdown");
              dropdown.style.display =
                dropdown.style.display === "block" ? "none" : "block";
            }

            // Close the dropdown if clicked outside
            window.onclick = function (event) {
              if (
                !event.target.matches(".menu-icon") &&
                !event.target.matches(".menu-icon *")
              ) {
                var dropdown = document.getElementById("dropdown");
                if (dropdown.style.display === "block") {
                  dropdown.style.display = "none";
                }
              }
            };
          </script>
        </div>
      </div>

      <div class="border-line"></div>
      <div class="nav-bar" id="nav-bar">
        <button class="home-button" onclick="location.href='index.html'">
          <i class="fas fa-home"></i>
        </button>

        <button class="home-button" onclick="location.href='notification.html'">
          <i class="fas fa-bell" id="notification-icon"></i>
        </button>
        <button class="home-button" onclick="location.href='cart.html'">
          <i class="fas fa-shopping-cart" id="cart-icon"></i>
        </button>
        <button class="home-button" onclick="location.href='profile.html'">
          <i class="fas fa-user-circle"></i>
        </button>
        <!-- -->
      </div>
    </header>

    <main>
      <section class="highlights">
        <div class="highlight-item">
          <i class="fas fa-gift"></i>
          <p>Giveaways</p>
        </div>
        <div class="highlight-item">
          <i class="fas fa-fire"></i>
          <p>Trending</p>
        </div>
        <div class="highlight-item">
          <i class="fas fa-tags"></i>
          <p>Deals</p>
        </div>
        <div class="highlight-item">
          <i class="fas fa-star"></i>
          <p>Top Rated</p>
        </div>
        <div class="highlight-item">
          <i class="fas fa-award"></i>
          <p>Awards</p>
        </div>
        <div class="highlight-item">
          <i class="fas fa-thumbs-up"></i>
          <p>Most Liked</p>
        </div>
      </section>
      <div class="categories-box">
        <a href="student-centre.html" class="box">
          <i class="fas fa-graduation-cap"></i>
          <p>Comrade Corner</p>
        </a>
        <a href="electronics.html" class="box">
          <i class="fas fa-tv"></i>
          <p>Electronics</p>
        </a>
        <a href="kitchenware.html" class="box">
          <i class="fas fa-blender"></i>
          <p>Kitchenware</p>
        </a>
        <a href="furniture.html" class="box">
          <i class="fas fa-couch"></i>
          <p>Furniture</p>
        </a>
        <a href="fashion.html" class="box">
          <i class="fas fa-tshirt"></i>
          <p>Fashion</p>
        </a>
        <a href="beauty.html" class="box">
          <i class="fas fa-heart"></i>
          <p>Beauty</p>
        </a>
        <a href="rentals.html" class="box">
          <i class="fas fa-building"></i>
          <p>Rentals</p>
        </a>

        <a href="phones.html" class="box">
          <i class="fas fa-mobile-alt"></i>
          <p>Phones</p>
        </a>

        <a href="pharmaceutical.html" class="box">
          <i class="fas fa-pills"></i>
          <p>Pharmaceutical</p>
        </a>
      </div>

      <div class="gallery-container"></div>

      <!--<div class="featured-listings">
        <h2>Featured Listings</h2>
        <div class="featured-listing">
   <!--Featured listing item will be dynamically inserted here </div>-->
      <section class="gallery">
        <div id="listings-container">
          <!-- Listings will be dynamically inserted here -->
        </div>
      </section>

      <nav>
        <div id="au tus">
          <p>User Status:</p>
          <!-- User status and logout button will be dynamically inserted here -->
        </div>
      </nav>

      <h1>Welcome to the Platform</h1>

      <script type="module">
        import { app } from "../src/js/firebase.js"; // Import your initialized Firebase app
        import {
          getDatabase,
          ref,
          onValue,
        } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-database.js";

        const db = getDatabase(app); // Get a reference to the database

        // Function to load listings from Realtime Database
        const loadListings = () => {
          const listingsContainer =
            document.getElementById("listings-container");
          listingsContainer.innerHTML = ""; // Clear existing content

          const listingsRef = ref(db, "Listings"); // Reference to the Listings node in Realtime Database

          // Listen for changes in the data
          onValue(
            listingsRef,
            (snapshot) => {
              listingsContainer.innerHTML = ""; // Clear content on each update

              const listingsData = snapshot.val(); // Get the listings data

              // Check if listingsData exists
              if (listingsData) {
                // Iterate through each listing and create HTML elements for them
                Object.keys(listingsData).forEach((key) => {
                  const listing = listingsData[key];
                  const listingElement = document.createElement("div");
                  listingElement.classList.add("listing-item");
                  listingElement.innerHTML = `
                            <h3>${listing.title}</h3>
                            <p>${listing.description}</p>
                        `;
                  listingsContainer.appendChild(listingElement);
                });
              } else {
                listingsContainer.innerHTML =
                  "<p>No listings available at the moment.</p>";
              }
            },
            (error) => {
              console.error("Error fetching listings: ", error);
            }
          );
        };

        // Call loadListings when the page loads
        document.addEventListener("DOMContentLoaded", loadListings);
      </script>
    </main>
    <footer>
      <div class="footer-content">
        <h3>Follow Us</h3>
        <ul class="socials">
          <li>
            <a href="https://www.facebook.com/yourprofile" target="_blank"
              ><i class="fab fa-facebook-f"></i
            ></a>
          </li>
          <li>
            <a href="https://www.twitter.com/yourprofile" target="_blank"
              ><i class="fab fa-twitter"></i
            ></a>
          </li>
          <li>
            <a href="https://www.instagram.com/yourprofile" target="_blank"
              ><i class="fab fa-instagram"></i
            ></a>
          </li>
          <li>
            <a href="https://www.linkedin.com/in/yourprofile" target="_blank"
              ><i class="fab fa-linkedin-in"></i
            ></a>
          </li>
          <li>
            <a href="https://www.pinterest.com/yourprofile" target="_blank"
              ><i class="fab fa-pinterest"></i
            ></a>
          </li>
        </ul>
      </div>
    </footer>

    <footer>
      <p>&copy; 2024 Oda Pap. All Rights Reserved.</p>
    </footer>
    <button class="floating-button" onclick="location.href='listing.html'">
      <i class="fas fa-plus"></i>
      <span class="button-text">Sell Now</span>
      <div class="fire-animation"></div>
  </button>
  </body>
</html>
